extend type Query{
    # [ClientAndAbove]
    self: Self!
}
extend type Mutation {
    # [ClientAndAbove]
    selfMutation: SelfMutation!
    # [OnlyAnon]
    registerWithEmailAndPassword(email: Email!, password: String!, displayName: String): SelfMutation!
}

interface PublicUserData{
    userId: Long!
    displayName: String!
    createdDate: Date!
    userTag: String!
    avatarPicture: File
}

interface SelfData{
    email: Email!
    subscribedCategories: [Category!]!
    ownedCircles: [Circle!]!
    joinedCircles: [Circle!]!
}

type Self implements SelfData & PublicUserData{
    userId: Long!
    displayName: String!
    email: Email!
    subscribedCategories: [Category!]!
    createdDate: Date!
    userTag: String!
    avatarPicture: File
    ownedCircles: [Circle!]!
    joinedCircles: [Circle!]!
}

type SelfMutation implements SelfData & PublicUserData{
    userId: Long!
    displayName: String!
    email: Email!
    createdDate: Date!
    userTag: String!
    avatarPicture: File
    ownedCircles: [Circle!]!
    joinedCircles: [Circle!]!

    subscribedCategories: [Category!]!

    setPassword(password: String!): SelfMutation!
    setDisplayName(displayName: String!): SelfMutation!

    addSubscribedCategory(categoryId: Long!): SelfMutation!
    removeSubscribedCategory(categoryId: Long!): SelfMutation!

    setAvatar(fileId: UUID!): SelfMutation!
    removeAvatar: SelfMutation!
}


enum Authority{
    ROLE_ANONYMOUS
    ROLE_CLIENT,
    ROLE_ADMIN
}

type User implements PublicUserData{
    userId: Long!
    displayName: String!
    createdDate: Date!
    userTag: String!
    avatarPicture: File
}

interface ImmutableUserItem{
    createdBy: User!
    createdDate: Date!
}